<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Team KKP | Onlineshop</title>
    <link rel="stylesheet" href="../css/onlineshop.css">
    <link rel="icon" href="../img/Vereinslogo.png">
</head>

<body>
    <header>
        <a href="Startseite.html" class="logo">
            <img src="../img/Vereinslogo.png" alt="Vereinslogo">
        </a>
        <nav class="navbar">
            <a href="teams.html">Teams</a>
            <a href="trainingszeit.html">Trainingszeit</a>
            <a href="events.html">Events</a>
            <a href="vereinsfuehrung.html">Vereinsführung</a>
            <a href="forum.html">Forum</a>
            <a href="onlineshop.html">Onlineshop</a>
        </nav>
        <button id="menuButton" class="menubutton"> <img src="../img/menu.png" alt="menupic" id="erstesBild"><img
                src="../img/menu-opened.png" alt="Anderes Bild" id="anderesBild" style="display: none;">
        </button>
        <div class="buttons">
            <a href="login.html" class="lgn-btn">Login</a>
            <a href="registrieren.html" class="btn-registrieren">Registrieren</a>
        </div>
    </header>

    <main>
        <div class="special-offer-box">
            <h2>Sonderangebot des Jahres!</h2>
            <p>Entdecken Sie unsere exklusiven Produkte zu unschlagbaren Preisen!</p>
            <p>Angebot endet in: <span id="countdown"></span></p>
        </div>

        <section class="shop">
            <div class="container">
                <div id="products">
                    <div class="product" data-id="1" data-name="Produkt 1" data-price="10">
                        <img src="../img/Ticket.jpg" alt="Produkt 1">
                        <p>Eintrittskarte KKP vs Vöhrenbach - <b><s>€15</s>
                                <font color="red"> €10</font>
                            </b></p>
                        <button onclick="addToCart(1)">In den Warenkorb</button>
                    </div>

                    <div class="product" data-id="2" data-name="Produkt 2" data-price="20">
                        <img src="../img/Fan Schal.png" alt="Produkt 1">
                        <p>Fan Schal Team KKP - <b><s>€29</s>
                                <font color="red">€20</font>
                            </b></p>
                        <button onclick="addToCart(2)">In den Warenkorb</button>

                    </div>

                    <div class="product" data-id="3" data-name="Photo" data-price="30">
                        <img src="../img/Ticket.jpg" alt="Produkt 1">
                        <p>Eintrittskarte KKP vs VC Eckstadt - <b><s>€40</s>
                                <font color="red"> €30</font>
                            </b></p>
                        <button onclick="addToCart(3)">In den Warenkorb</button>
                    </div>

                    <div class="product" data-id="4" data-name="Prod" data-price="99">

                        <img src="../img/Trikot.jpg" alt="Produkt 1">
                        <p>Trikot - <b><s>€120</s>
                                <font color="red">€99</font>
                            </b></p>
                        <button onclick="addToCart(4)">In den Warenkorb</button>
                    </div>
                </div>

                <div id="cart">
                    <h2>Warenkorb</h2>
                    <ul id="cart-items"></ul>
                    <p id="total">Gesamt: €0</p>
                    <button id="checkout-button" onclick="checkout()">Checkout</button>
                </div>
            </div>
        </section>

            <script>
                document.addEventListener('DOMContentLoaded', function () {

                    setTimeout(function () {
                        document.getElementById('help-box').style.display = 'block';

                        // Help Box nach 10 Sekunden ausblenden
                        setTimeout(function () {
                            document.getElementById('help-box').style.display = 'none';
                        }, 10000);

                    }, 3000); // Help Box nach 3 Sekunden anzeigen
                });

            </script>

            <div id="overlay">
                <div id="checkout-popup">
                    <h2>Bestellinformationen</h2>
                    <div id="order-details"></div>
                    <div class="popup-buttons">
                        <button onclick="cancelOrder()">Abbrechen</button>
                        <button onclick="showOrderConfirmationPopup()">Bestellen</button>
                    </div>
                </div>
            </div>

            <div id="order-confirmation-popup">
                <p>Ihre Bestellung wurde erfolgreich aufgegeben!</p>
            </div>

            <div id="order-cancelation-popup">
                <p>Ihre Bestellung wurde Abgebrochen!</p>
            </div>
    </main>

    <div id="help-box">
        <p>Brauchen Sie Hilfe? Bitte <a href="Kontakt.html">klicken Sie hier</a>.</p>
    </div>

    <footer>
        <div class="footer-container">
            <div class="footer-left">
                <p class="team-kkp">Team KKP</p>
                <p class="gruendung">gegründet 2023</p>
            </div>
            <div class="footer-right">
                <nav>
                    <ul>
                        <li><a href="Datenschutz.html">Datenschutz</a></li>
                        <li><a href="Versandbedingungen.html">Versandbedingungen</a></li>
                        <li><a href="Aboutus.html">About us</a></li>
                        <li><a href="Kontakt.html">Kontakt</a></li>
                    </ul>
                </nav>
                <nav>
                    <ul>
                        <li><a href="https://de-de.facebook.com/BundesligaOfficial/">Facebook</a></li>
                        <li><a href="https://www.instagram.com/bundesliga/">Instagram</a></li>
                        <li><a href="https://twitter.com/Bundesliga_EN">Twitter</a></li>
                        <li><a href="https://www.youtube.com/bundesligatv/videos">Youtube</a></li>
                    </ul>
                </nav>
                <nav>
                    <ul>
                        <li><a href="Impresssum.html">Impressum</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </footer>

</body>

</html>


<script>
    document.addEventListener('DOMContentLoaded', function () { // Funktiion für den Countdown
        var countDownDate = new Date("May 6, 2024 00:00:00").getTime();

        var x = setInterval(function () {
            var now = new Date().getTime();
            var distance = countDownDate - now;

            var days = Math.floor(distance / (1000 * 60 * 60 * 24));
            var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            var seconds = Math.floor((distance % (1000 * 60)) / 1000);

            document.getElementById("countdown").innerHTML = days + "d " + hours + "h " + minutes + "m " + seconds + "s ";

            if (distance < 0) {
                clearInterval(x);
                document.getElementById("countdown").innerHTML = "Angebot abgelaufen!";
            }
        }, 1000);
    });
</script>


<script>
    document.addEventListener('DOMContentLoaded', function () {
        const menuButton = document.getElementById('menuButton');
        const navbar = document.querySelector('.navbar');

        menuButton.addEventListener('click', function () {
            navbar.classList.toggle('showmenu');
            toggleImages(); // Aufruf der Funktion zum Umschalten der Bilder
        });

        // Funktion zum Umschalten der Bilder
        function toggleImages() {
            const erstesBild = document.getElementById('erstesBild');
            const anderesBild = document.getElementById('anderesBild');

            if (navbar.classList.contains('showmenu')) {
                // Wenn die Navigationsleiste sichtbar ist, anderesBild anzeigen für den Button
                erstesBild.style.display = 'none';
                anderesBild.style.display = 'block';
            } else {
                // Ansonsten erstesBild
                erstesBild.style.display = 'block';
                anderesBild.style.display = 'none';
            }
        }
    });

</script>

<script>

    function checkout() { //checkout Funktion
        let cart = JSON.parse(localStorage.getItem('cart')) || [];

        if (cart.length > 0) {
            localStorage.removeItem('cart');
            updateCartDisplay();

            openPopup(cart);


        } else {
            alert('Your cart is empty. Add items before checking out.');
        }
    }


    function showOrderConfirmationPopup() { 
        closePopup();
        let confirmationPopup = document.getElementById('order-confirmation-popup');
        confirmationPopup.style.display = 'block';
        setTimeout(function () {
            confirmationPopup.style.display = 'none';

        }, 3000);
    }

    function cancelOrder() {
        closePopup();
        let cancelPopup = document.getElementById('order-cancelation-popup');
        cancelPopup.style.display = 'block';

        setTimeout(function () {
            cancelPopup.style.display = 'none';

        }, 3000);
    }


    function addToCart(productId) {
        let cart = JSON.parse(localStorage.getItem('cart')) || [];
        let product = getProductById(productId);

        if (product) {
            cart.push({ id: product.id, name: product.name, price: product.price });
            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartDisplay();
        }

        if (window.innerWidth <= 580) {
            document.getElementById("cart").scrollIntoView({ behavior: "smooth" });
        }
    }


    function removeFromCart(productId) {
        let cart = JSON.parse(localStorage.getItem('cart')) || [];

        let index = cart.findIndex(item => item.id === productId);
        if (index !== -1) {
            cart.splice(index, 1);
            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartDisplay();
        }
    }



    function getProductById(productId) {
        const products = [
            { id: 1, name: 'Eintrittskarte KKP vs Vöhrenbach', price: 10 },
            { id: 2, name: 'Fan Schal Team KKP', price: 20 },
            { id: 3, name: 'Eintrittskarte KKP vs VC Eckstadt', price: 30 },
            { id: 4, name: 'Trikot', price: 99 },
        ];

        return products.find(product => product.id === productId);
    }



    function updateCartDisplay() {
        let cart = JSON.parse(localStorage.getItem('cart')) || [];
        let cartItemsList = document.getElementById('cart-items');
        let totalElement = document.getElementById('total');

        cartItemsList.innerHTML = '';
        let total = 0;

        cart.forEach(item => {
            let listItem = document.createElement('li');
            listItem.textContent = `${item.name} - €${item.price.toFixed(2)}`;

            let removeButton = document.createElement('button');
            removeButton.textContent = 'Entfernen';
            removeButton.onclick = function () {
                removeFromCart(item.id);
            };
            listItem.appendChild(removeButton);

            cartItemsList.appendChild(listItem);
            total += item.price;
        });

        totalElement.textContent = `Gesamt: €${total.toFixed(2)}`;
    }

    window.onload = function () {
        updateCartDisplay();
    };


    function placeOrder() {

        localStorage.removeItem('cart');
        updateCartDisplay();

        closePopup();
    }
</script>

<script>

    function openPopup(orderDetails) {
        let popup = document.getElementById('overlay');
        let orderDetailsElement = document.getElementById('order-details');

        let orderHtml = '';
        let total = 0; // Gesamtsumme initialisieren

        orderDetails.forEach(item => {
            orderHtml += `<li>${item.name} - €${item.price.toFixed(2)}</li>`;
            total += item.price; // Gesamtsumme aktualisieren
        });

        orderHtml += `<b> Gesamt: €${total.toFixed(2)} </b>`; // Gesamtsumme hinzufügen
        orderHtml += '</ul>';

        orderDetailsElement.innerHTML = orderHtml;

        // Zeige das Pop-up an
        popup.style.display = 'flex';
    }

    function closePopup() {
        let popup = document.getElementById('overlay');

        // Verstecke das Pop-up
        popup.style.display = 'none';
    }
</script>